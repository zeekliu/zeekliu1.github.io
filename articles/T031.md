<head>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
            }
        });
    </script>
</head>

## 【T031】CF1811E 题解
### 23.04.07

题意简述：给定一个序列（序列从 $1$ 开始），要求其中不能有含有 $4$ 的数（因为日语中 $4$ 是死的意思，~~果然日语抄中文~~）。对于每个询问，求出序列的第 $n$ 个数。

一眼数据范围，$1\le k \le 10^{12}$，$1 \le t \le 10^4$，枚举肯定爆炸。

那么该怎么做呢？观察样例。

可以观察到其中的每个数都变大了一些，而十个数字中有一个不能用，可以想到什么？**九进制**。

但显然这不是普通的九进制，普通的九进制是没有 $9$，这个是没有 $4$，所以显然它也不能按普通的方法处理。

但我们列几组数据看看：

数据 $1$：
> $10$ 进制：$4$ ｜
> 普通 $9$ 进制：$4$ ｜
> 特殊 $9$ 进制：$5$

数据 $2$：
> $10$ 进制：$10$ ｜
> 普通 $9$ 进制：$11$ ｜
> 特殊 $9$ 进制：$11$

数据 $3$：
> $10$ 进制：$40$ ｜
> 普通 $9$ 进制：$44$ ｜
> 特殊 $9$ 进制：$55$

数据 $4$：
> $10$ 进制：$130$ ｜
> 普通 $9$ 进制：$154$ ｜
> 特殊 $9$ 进制：$155$

数据 $5$：
> $10$ 进制：$69$ ｜
> 普通 $9$ 进制：$76$ ｜
> 特殊 $9$ 进制：$87$

观察了这么多组，我们应该能发现，对于每一位数字，如果它的九进制表示大于等于 $4$，那么他就会被跳过，因此这一位数字应该 $+1$。

所以就很简单了，总结：**进制转换 + 逐位判断**。

很好，这样做就掉坑了。

因为你对一个数位是 $9$ 的位置 $+1$ 后就会爆炸，因此还要统计进位。这样就可以了。

代码：

```cpp
//CF1811E 23.04.07
#include <bits/stdc++.h>
using namespace std;

inline void change()
{
    long long x,b,jw=0;
    cin>>x; b=9;
    string ans="";
    while (x)
    {
        ans+=x%b+48,x/=b;
    }
    reverse(ans.begin(),ans.end());
    for (int i=0;i<ans.length();i++)
    {
        if (ans[i]=='9') ans[i]='0',jw=1;
        ans[i]+=jw,jw=0;
        if (ans[i]>'3') ans[i]++;
    }
    for (int i=0;i<ans.length();i++) cout<<ans[i];
    cout<<endl;
    return;
}

int main()
{
    ios::sync_with_stdio(0);
    cin.tie(0); cout.tie(0);
    int _; cin>>_;
    while (_--) change();
    exit(0);
}
```
